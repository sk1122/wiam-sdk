let wiamSessionId="",wiamProjectId="";self.addEventListener("fetch",e=>{e.request.body&&e.request.body.getReader().read().then(({done:e,value:a})=>{let t=new TextDecoder().decode(a);if(t){let d=JSON.parse(t);"getSignatureStatuses"===d.method&&(console.log("FOUND A TRANSACTION => ",d.params[0][0]),wiamSessionId&&wiamProjectId&&fetch("https://web3-iam-production-0d26.up.railway.app/v1/events",{method:"POST",body:JSON.stringify({name:"transaction_executed",eventId:"transaction_executed",data:{hash:d.params[0][0]},blockchain:"SOLANA",project:wiamProjectId,iamUser:wiamSessionId}),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>console.log("TRANSACTION RECORED => ",e)).catch(e=>console.log("CAN'T RECORD TRANSACTION => ",e)))}})}),self.addEventListener("message",e=>{"wiamSessionId"===e.data.key&&(wiamSessionId=e.data.value),"wiamProjectId"===e.data.key&&(wiamProjectId=e.data.value)});
